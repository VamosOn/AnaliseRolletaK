
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dashboard Profissional de Roleta â€“ Completo</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg:#020617;
  --panel:#111827;
  --border:#1f2937;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --red:#dc2626;
  --green:#16a34a;
  --blue:#3b82f6;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,Arial,sans-serif}
header{padding:16px;text-align:center;border-bottom:1px solid var(--border)}
.dashboard{display:grid;grid-template-columns:2fr 1fr;gap:12px;padding:12px}
.card{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:14px}
.card h3{margin:0 0 10px;font-size:14px}
.btn{width:100%;padding:10px;border:none;border-radius:10px;font-weight:600;cursor:pointer;background:var(--blue);color:white}
.btn.red{background:var(--red)}
.grid{display:grid;grid-template-columns:repeat(6,1fr);gap:6px}
.grid button{padding:10px;border-radius:8px;border:none;font-weight:600;cursor:pointer}
.red{background:var(--red);color:white}
.black{background:#020617;color:white}
.green{background:var(--green);color:white}
.history{display:flex;gap:6px;overflow-x:auto;flex-wrap:wrap}
.history span{padding:6px 10px;border-radius:8px;font-weight:600;color:white}
.alert{padding:10px;border-radius:10px;border:1px dashed var(--border);color:#fbbf24}
.info{font-size:13px;color:var(--muted)}
canvas{max-height:220px}
@media(max-width:900px){.dashboard{grid-template-columns:1fr}}
@media(max-width:600px){header h1{font-size:18px}.grid{grid-template-columns:repeat(5,1fr)}canvas{max-height:180px}}
@media(max-width:400px){.grid{grid-template-columns:repeat(4,1fr)}header h1{font-size:16px}}
</style>
</head>
<body>
<header><h1>ğŸ° Dashboard Profissional de Roleta</h1></header>
<div class="dashboard">

<!-- Entrada RÃ¡pida -->
<div class="card">
<h3>ğŸ¯ Entrada RÃ¡pida</h3>
<div class="grid" id="tecladoTopo"></div>
<button class="btn red" style="margin-top:10px" onclick="novaSessao()">ğŸ§¹ Nova SessÃ£o</button>
</div>

<!-- SugestÃ£o de Jogada -->
<div class="card">
<h3>ğŸ¯ SugestÃ£o de Jogada</h3>
<p id="sugestao" class="info"></p>
<p id="intersecao" class="info"></p>
</div>

<!-- SessÃ£o Atual -->
<div class="card">
<h3>ğŸ“ SessÃ£o Atual</h3>
<p id="sessaoAtual" class="info"></p>
</div>

<!-- HistÃ³rico da SessÃ£o -->
<div class="card">
<h3>ğŸ“œ HistÃ³rico (SessÃ£o)</h3>
<div id="historico" class="history"></div>
</div>

<!-- GrÃ¡ficos -->
<div class="card"><h3>ğŸ“Š FrequÃªncia</h3><canvas id="graficoFreq"></canvas></div>
<div class="card"><h3>ğŸ“Š DÃºzias</h3><canvas id="graficoDuzias"></canvas></div>
<div class="card"><h3>ğŸ“Š Colunas</h3><canvas id="graficoColunas"></canvas></div>
<div class="card"><h3>ğŸ¨ Cores</h3><canvas id="graficoCores"></canvas></div>
<div class="card"><h3>ğŸ”¥ Heatmap por Ãrea</h3><canvas id="graficoAreas"></canvas><p id="areasSugestao" class="info"></p></div>
<div class="card"><h3>â³ Ciclos de Atraso</h3><p id="atrasos" class="info"></p></div>
<div class="card"><h3>ğŸš¨ Alertas</h3><div id="alerta" class="alert">Nenhum alerta ativo</div></div>

<script>
const vermelho=[1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];
const preto=[2,4,6,8,10,11,13,15,17,20,22,24,26,28,29,31,33,35];
const col1=[1,4,7,10,13,16,19,22,25,28,31,34];
const col2=[2,5,8,11,14,17,20,23,26,29,32,35];
const col3=[3,6,9,12,15,18,21,24,27,30,33,36];
const tiers=[5,8,10,11,13,16,23,24,27,30,33,36];
const orp=[1,6,9,14,17,20,31,34];
const voi=[0,2,3,4,7,12,15,18,21,19,22,26,25,28,29,32,35];

let sessao=[];
let inicioSessao = null;
let chartFreq,chartDuzias,chartColunas,chartCores,chartAreas;

// Registro de nÃºmeros
function processarNumero(n){
  sessao.push(n);
  if(!inicioSessao) inicioSessao = new Date();
  atualizarHistorico(n);
  atualizarTudo();
}

// Nova sessÃ£o
function novaSessao(){
  sessao=[];
  inicioSessao = new Date();
  document.getElementById('historico').innerHTML='';
  atualizarTudo();
}

// Atualizar histÃ³rico visual
function atualizarHistorico(n){
  const h=document.getElementById('historico');
  const s=document.createElement('span');
  s.innerText=n;
  s.style.background=vermelho.includes(n)?'var(--red)':preto.includes(n)?'#020617':'var(--green)';
  h.prepend(s);
  if(h.children.length>50) h.removeChild(h.lastChild);
}

// SessÃ£o atual
function atualizarSessaoAtual(){
  const p=document.getElementById('sessaoAtual');
  if(!inicioSessao) inicioSessao=new Date();
  const hora=inicioSessao.toLocaleTimeString();
  p.innerText=`InÃ­cio: ${hora} | Giros: ${sessao.length}`;
}

// AvaliaÃ§Ã£o da sessÃ£o
function avaliarSessao(){
  if(sessao.length<12) return {estado:'Curta', ok:false};
  let alt=0;
  for(let i=1;i<sessao.length;i++){
    if((vermelho.includes(sessao[i])&&preto.includes(sessao[i-1]))||(preto.includes(sessao[i])&&vermelho.includes(sessao[i-1]))) alt++;
  }
  const taxa=alt/(sessao.length-1);
  if(taxa>0.65) return {estado:'InstÃ¡vel', ok:false};
  if(taxa<0.35) return {estado:'Quente', ok:true};
  return {estado:'EstÃ¡vel', ok:true};
}

// SugestÃ£o de jogada com interseÃ§Ã£o final
function atualizarSugestao(){
  const card=document.getElementById('sugestao');
  const intersecao=document.getElementById('intersecao');
  intersecao.innerText='';

  if(sessao.length<10){
    card.innerText='SessÃ£o curta â€” aguarde';
    return;
  }

  const estado=avaliarSessao();
  if(!estado.ok){
    card.innerText=`SessÃ£o ${estado.estado} â€” sem entrada`;
    return;
  }

  const areas=[['Tiers',tiers],['Orphelins',orp],['Voisins',voi]];
  const score=areas.map(a=>a[1].filter(n=>sessao.includes(n)).length);
  const ia=score.indexOf(Math.max(...score));
  if(score[ia]<3){
    card.innerText='Sem Ã¡rea dominante';
    return;
  }

  const d=atualizarDuzias();
  const c=atualizarColunas();
  const id=d.indexOf(Math.max(...d));
  const ic=c.indexOf(Math.max(...c));
  const duz=[Array.from({length:12},(_,i)=>i+1),Array.from({length:12},(_,i)=>i+13),Array.from({length:12},(_,i)=>i+25)][id];
  const col=[col1,col2,col3][ic];

  let cand=areas[ia][1].filter(n=>duz.includes(n)&&col.includes(n));
  cand=cand.filter(n=>!sessao.slice(-3).includes(n));

  if(cand.length<3){
    card.innerText='ConfluÃªncia fraca';
    return;
  }

  card.innerText='Entrada por confluÃªncia ativa (Ã¡rea + dÃºzia + coluna)';
  intersecao.innerHTML=`ğŸ¯ InterseÃ§Ã£o final:<br>ğŸ‘‰ ${cand.join(', ')}<br>ğŸ“Œ SÃ³ esses nÃºmeros.`;
}

// Atualizar grÃ¡ficos
function atualizarFrequencia(){
  const c=Array(37).fill(0);
  sessao.forEach(n=>c[n]++);
  if(chartFreq) chartFreq.destroy();
  chartFreq=new Chart(graficoFreq,{type:'bar',data:{labels:[...Array(37).keys()],datasets:[{data:c,backgroundColor:'#3b82f6'}]},options:{plugins:{legend:{display:false}}}});
}

function atualizarDuzias(){
  const d=[0,0,0];
  sessao.forEach(n=>{
    if(n>=1&&n<=12) d[0]++;
    else if(n<=24) d[1]++;
    else if(n<=36) d[2]++;
  });
  if(chartDuzias) chartDuzias.destroy();
  chartDuzias=new Chart(graficoDuzias,{type:'bar',data:{labels:['1Âª','2Âª','3Âª'],datasets:[{data:d,backgroundColor:['#f59e0b','#10b981','#6366f1']}]},options:{plugins:{legend:{display:false}}}});
  return d;
}

function atualizarColunas(){
  const c=[0,0,0];
  sessao.forEach(n=>{
    if(col1.includes(n)) c[0]++;
    else if(col2.includes(n)) c[1]++;
    else if(col3.includes(n)) c[2]++;
  });
  if(chartColunas) chartColunas.destroy();
  chartColunas=new Chart(graficoColunas,{type:'bar',data:{labels:['C1','C2','C3'],datasets:[{data:c,backgroundColor:['#ef4444','#3b82f6','#22c55e']}]},options:{plugins:{legend:{display:false}}}});
  return c;
}

function atualizarCores(){
  let r=0,p=0,g=0;
  sessao.forEach(n=>{
    if(vermelho.includes(n)) r++;
    else if(preto.includes(n)) p++;
    else g++;
  });
  if(chartCores) chartCores.destroy();
  chartCores=new Chart(graficoCores,{type:'pie',data:{labels:['Vermelho','Preto','Zero'],datasets:[{data:[r,p,g],backgroundColor:['#dc2626','#020617','#16a34a']}]}})
}

function atualizarAreas(){
  const d=[sessao.filter(n=>tiers.includes(n)).length,sessao.filter(n=>orp.includes(n)).length,sessao.filter(n=>voi.includes(n)).length];
  if(chartAreas) chartAreas.destroy();
  chartAreas=new Chart(graficoAreas,{type:'bar',data:{labels:['Tiers','Orphelins','Voisins'],datasets:[{data:d,backgroundColor:['#3b82f6','#f97316','#ef4444']}]},options:{plugins:{legend:{display:false}}}});
  document.getElementById('areasSugestao').innerText=`Ãrea forte: ${['Tiers','Orphelins','Voisins'][d.indexOf(Math.max(...d))]}`;
}

function atualizarAtrasos(){
  const txt=[['Tiers',tiers],['Orphelins',orp],['Voisins',voi]].map(([n,l])=>{
    let i=sessao.length-1,c=0;
    while(i>=0&&!l.includes(sessao[i])){c++;i--;}
    return `${n}: ${i<0?'-':c}`;
  });
  document.getElementById('atrasos').innerText=txt.join(' | ');
}

function verificarAlertas(){
  const u=sessao.slice(-3);
  const a=document.getElementById('alerta');
  if(u.length===3&&u.every(n=>vermelho.includes(n))) a.innerText='ğŸ”¥ 3 Vermelhos â†’ possÃ­vel Preto';
  else if(u.length===3&&u.every(n=>preto.includes(n))) a.innerText='ğŸ”¥ 3 Pretos â†’ possÃ­vel Vermelho';
  else a.innerText='Nenhum alerta ativo';
}

// Atualiza tudo
function atualizarTudo(){
  atualizarFrequencia();
  atualizarDuzias();
  atualizarColunas();
  atualizarCores();
  atualizarAreas();
  atualizarAtrasos();
  atualizarSugestao();
  atualizarSessaoAtual();
  verificarAlertas();
}

// Cria o teclado de entrada rÃ¡pida
const topo=document.getElementById('tecladoTopo');
for(let i=0;i<=36;i++){
  const b=document.createElement('button');
  b.innerText=i;
  b.className=vermelho.includes(i)?'red':preto.includes(i)?'black':'green';
  b.onclick=()=>processarNumero(i);
  topo.appendChild(b);
}

atualizarTudo();
</script>
</body>
</html>
