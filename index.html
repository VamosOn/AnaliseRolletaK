
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dashboard Profissional de Roleta â€“ Completo</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg:#020617;
  --panel:#111827;
  --border:#1f2937;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --red:#dc2626;
  --green:#16a34a;
  --blue:#3b82f6;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,Arial,sans-serif}
header{padding:16px;text-align:center;border-bottom:1px solid var(--border)}
.dashboard{display:grid;grid-template-columns:2fr 1fr;gap:12px;padding:12px}
.card{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:14px}
.card h3{margin:0 0 10px;font-size:14px}
.btn{width:100%;padding:10px;border:none;border-radius:10px;font-weight:600;cursor:pointer;background:var(--blue);color:white}
.btn.red{background:var(--red)}
.grid{display:grid;grid-template-columns:repeat(6,1fr);gap:6px}
.grid button{padding:10px;border-radius:8px;border:none;font-weight:600;cursor:pointer}
.red{background:var(--red);color:white}
.black{background:#020617;color:white}
.green{background:var(--green);color:white}
.history{display:flex;gap:6px;overflow-x:auto;flex-wrap:wrap}
.history span{padding:6px 10px;border-radius:8px;font-weight:600;color:white}
.alert{padding:10px;border-radius:10px;border:1px dashed var(--border);color:#fbbf24}
.info{font-size:13px;color:var(--muted)}
canvas{max-height:220px}
@media(max-width:900px){.dashboard{grid-template-columns:1fr}}
</style>
</head>

<body>
<header><h1>ğŸ° K8 Vencendo a Roleta</h1></header>

<div class="dashboard">

<div class="card">
<h3>ğŸ¯ Entrada RÃ¡pida</h3>
<div class="grid" id="tecladoTopo"></div>
<button class="btn red" style="margin-top:10px" onclick="novaSessao()">ğŸ§¹ Nova SessÃ£o</button>
</div>

<div class="card">
<h3>ğŸ¯ SugestÃ£o de Jogada</h3>
<pre id="sugestao" class="info"></pre>
</div>

<div class="card">
<h3>ğŸ“ SessÃ£o Atual</h3>
<p id="sessaoAtual" class="info"></p>
</div>

<div class="card">
<h3>ğŸ“œ HistÃ³rico (SessÃ£o)</h3>
<div id="historico" class="history"></div>
</div>

<div class="card"><h3>ğŸ“Š FrequÃªncia</h3><canvas id="graficoFreq"></canvas></div>
<div class="card"><h3>ğŸ“Š DÃºzias</h3><canvas id="graficoDuzias"></canvas></div>
<div class="card"><h3>ğŸ“Š Colunas</h3><canvas id="graficoColunas"></canvas></div>
<div class="card"><h3>ğŸ¨ Cores</h3><canvas id="graficoCores"></canvas></div>
<div class="card"><h3>ğŸ”¥ Heatmap por Ãrea</h3><canvas id="graficoAreas"></canvas></div>

</div>

<script>
/* ================= DADOS ================= */
const vermelho=[1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];
const preto=[2,4,6,8,10,11,13,15,17,20,22,24,26,28,29,31,33,35];
const col1=[1,4,7,10,13,16,19,22,25,28,31,34];
const col2=[2,5,8,11,14,17,20,23,26,29,32,35];
const col3=[3,6,9,12,15,18,21,24,27,30,33,36];
const tiers=[5,8,10,11,13,16,23,24,27,30,33,36];
const orp=[1,6,9,14,17,20,31,34];
const voi=[0,2,3,4,7,12,15,18,21,22,25,26,28,29,32,35];

let sessao=[];
let inicioSessao=null;

let chartFreq,chartDuzias,chartColunas,chartCores,chartAreas;

/* ================= CORE ================= */
function processarNumero(n){
  sessao.push(n);
  if(!inicioSessao) inicioSessao=new Date();
  atualizarHistorico(n);
  atualizarTudo();
}

function novaSessao(){
  sessao=[];
  inicioSessao=new Date();
  document.getElementById('historico').innerHTML='';
  atualizarTudo();
}

function atualizarHistorico(n){
  const h=document.getElementById('historico');
  const s=document.createElement('span');
  s.innerText=n;
  s.style.background=vermelho.includes(n)?'var(--red)':preto.includes(n)?'#020617':'var(--green)';
  h.prepend(s);
}

function atualizarSessaoAtual(){
  const p=document.getElementById('sessaoAtual');
  p.innerText=`InÃ­cio: ${inicioSessao.toLocaleTimeString()} | Giros: ${sessao.length}`;
}

/* ================= SUGESTÃƒO PROFISSIONAL SCORE 11 ================= */
function atualizarSugestao(){
  const out=document.getElementById('sugestao');

  let score=0,estrutura=[],leitura='Movimento neutro';

  const cavalo=detectarCavalo();
  if(cavalo){score+=5;estrutura.push(`â€¢ Cavalo ${cavalo.join('â€“')}`);}

  const terminal=detectarTerminal();
  if(terminal){score+=4;estrutura.push(`â€¢ Terminal ${terminal.terminal} ativo`);}

  const area=detectarLeitura();
  if(area){score+=3;leitura=area;}

  // entrada: se nÃ£o houver, usar combinaÃ§Ã£o simples do cavalo e terminal
  let entrada = terminal && cavalo ? gerarEntrada(cavalo,terminal) : [];
  if(score >= 11 && entrada.length === 0 && cavalo && terminal){
      entrada = terminal.vizinhos.filter(n=>n!==0); // garante que sempre apareÃ§a algo
  }

  let msg='';
  if(score>=11){
    msg = `ğŸ¯ Entrada TÃ©cnica AvanÃ§ada

Modelo: ConfluÃªncia Inversa
Score: ${score}/13 (Alta)

Estrutura dominante:
${estrutura.join('\n')}

Leitura espacial:
â€¢ ${leitura}

Entrada sugerida:
ğŸ‘‰ ${entrada.join(', ')}

GestÃ£o:
â€¢ MÃ¡x. 2 giros
â€¢ NÃ£o cobrir zero
â€¢ Cancelar se repetir terminal`;
  } else if(sessao.length<3){
    msg = `SessÃ£o muito curta â€” score atual: ${score}/13`;
  } else {
    msg = `Score atual: ${score}/13 â€” aguardando confluÃªncia para mostrar entrada`;
  }

  out.textContent = msg;
}

/* ================= LÃ“GICA ================= */
function detectarCavalo(){
  const j=sessao.slice(-12);
  const cavalos=[
    [1,4,7,10,13,16,19,22,25,28,31,34],
    [2,5,8,11,14,17,20,23,26,29,32,35],
    [3,6,9,12,15,18,21,24,27,30,33,36]
  ];
  let best=null,max=0;
  cavalos.forEach(c=>{
    const n=j.filter(x=>c.includes(x)).length;
    if(n>max){max=n;best=c;}
  });
  return max>=2?best.slice(0,3):null;
}

function detectarTerminal(){
  const j=sessao.slice(-10);
  const t={};
  j.forEach(n=>{if(n!==0)t[n%10]=(t[n%10]||0)+1});
  const k=Object.keys(t).find(x=>t[x]>=2);
  if(!k)return null;
  return {terminal:+k,vizinhos:vizinhos(+k)};
}

function detectarLeitura(){
  const j=sessao.slice(-6);
  const m=j.map(n=>voi.includes(n)?'Voisins':orp.includes(n)?'Orphelins':tiers.includes(n)?'Tiers':null).filter(Boolean);
  if(m.join('-').includes('Voisins-Orphelins'))return'Continuidade Voisins â†’ Orphelins';
  if(m.join('-').includes('Orphelins-Tiers'))return'Continuidade Orphelins â†’ Tiers';
  return null;
}

function gerarEntrada(cavalo,terminal){
  return terminal.vizinhos
    .filter(n=>cavalo.includes(n))
    .filter(n=>!sessao.slice(-3).includes(n))
    .filter(n=>n!==0);
}

function vizinhos(n){
  const c=[0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8,23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26];
  const i=c.indexOf(n);
  return [c[(i-1+37)%37],c[(i+1)%37]];
}

/* ================= GRÃFICOS ================= */
function atualizarFrequencia(){
  const c=Array(37).fill(0);
  sessao.forEach(n=>c[n]++);
  if(chartFreq) chartFreq.destroy();
  chartFreq=new Chart(graficoFreq,{type:'bar',data:{labels:[...Array(37).keys()],datasets:[{data:c,backgroundColor:'#3b82f6'}]},options:{plugins:{legend:{display:false}}}});
}

function atualizarDuzias(){
  const d=[0,0,0];
  sessao.forEach(n=>{
    if(n>=1&&n<=12)d[0]++;
    else if(n<=24)d[1]++;
    else if(n<=36)d[2]++;
  });
  if(chartDuzias) chartDuzias.destroy();
  chartDuzias=new Chart(graficoDuzias,{type:'bar',data:{labels:['1Âª','2Âª','3Âª'],datasets:[{data:d,backgroundColor:['#f59e0b','#10b981','#6366f1']}]},options:{plugins:{legend:{display:false}}}});
}

function atualizarColunas(){
  const c=[0,0,0];
  sessao.forEach(n=>{
    if(col1.includes(n))c[0]++;
    else if(col2.includes(n))c[1]++;
    else if(col3.includes(n))c[2]++;
  });
  if(chartColunas) chartColunas.destroy();
  chartColunas=new Chart(graficoColunas,{type:'bar',data:{labels:['C1','C2','C3'],datasets:[{data:c,backgroundColor:['#ef4444','#3b82f6','#22c55e']}]},options:{plugins:{legend:{display:false}}}});
}

function atualizarCores(){
  let r=0,p=0,g=0;
  sessao.forEach(n=>{
    if(vermelho.includes(n))r++;
    else if(preto.includes(n))p++;
    else g++;
  });
  if(chartCores) chartCores.destroy();
  chartCores=new Chart(graficoCores,{type:'pie',data:{labels:['Vermelho','Preto','Zero'],datasets:[{data:[r,p,g],backgroundColor:['#dc2626','#020617','#16a34a']}]}})
}

function atualizarAreas(){
  const d=[sessao.filter(n=>tiers.includes(n)).length,sessao.filter(n=>orp.includes(n)).length,sessao.filter(n=>voi.includes(n)).length];
  if(chartAreas) chartAreas.destroy();
  chartAreas=new Chart(graficoAreas,{type:'bar',data:{labels:['Tiers','Orphelins','Voisins'],datasets:[{data:d,backgroundColor:['#3b82f6','#f97316','#ef4444']}]},options:{plugins:{legend:{display:false}}}});
}

/* ================= ATUALIZAÃ‡ÃƒO COMPLETA ================= */
function atualizarTudo(){
  atualizarSessaoAtual();
  atualizarSugestao();
  atualizarFrequencia();
  atualizarDuzias();
  atualizarColunas();
  atualizarCores();
  atualizarAreas();
}

/* ================= TECLADO ================= */
const topo=document.getElementById('tecladoTopo');
for(let i=0;i<=36;i++){
  const b=document.createElement('button');
  b.innerText=i;
  b.className=vermelho.includes(i)?'red':preto.includes(i)?'black':'green';
  b.onclick=()=>processarNumero(i);
  topo.appendChild(b);
}

inicioSessao=new Date();
atualizarTudo();
</script>
</body>
</html>
